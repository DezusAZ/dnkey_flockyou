; ================== PlatformIO Config (Xiao ESP32-S3 + DNKey ESP32-S3) ==================
[platformio]
; build DNKey by default (change to xiao_esp32s3 if you want)
default_envs = dnkey_esp32s3

; -------------------------------------------------------------------
; Seeed Xiao ESP32-S3 (buzzer only, no eyes)
; -------------------------------------------------------------------
[env:xiao_esp32s3]
platform = espressif32
board = seeed_xiao_esp32s3
framework = arduino
monitor_speed = 115200

lib_deps =
  h2zero/NimBLE-Arduino@^1.4.0
  bblanchon/ArduinoJson@^6.21.0

build_flags =
  -DARDUINO_USB_MODE=1
  -DARDUINO_USB_CDC_ON_BOOT=1
  -DCONFIG_BT_NIMBLE_ENABLED=1
  ; buzzer on Xiao
  -DBUZZER_PIN=3

; -------------------------------------------------------------------
; DNKey ESP32-S3 (eye LEDs instead of buzzer)
; -------------------------------------------------------------------
[env:dnkey_esp32s3]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
monitor_speed = 115200

lib_deps =
  h2zero/NimBLE-Arduino@^1.4.0
  bblanchon/ArduinoJson@^6.21.0
  adafruit/Adafruit NeoPixel@^1.12.3

build_flags =
  -DARDUINO_USB_MODE=1
  -DARDUINO_USB_CDC_ON_BOOT=1
  -DCONFIG_BT_NIMBLE_ENABLED=1

  ; *** TURN ON DNKEY EYES ***
  -DUSE_DNKEY_EYES=1
  -DDNKEY_LED_NEOPIXEL=1

  ; single WS2812 data line for both eyes
  -DNEOPIXEL_DATA_PIN=2

  ; eye layout
  -DNEOPIXEL_EYE_COUNT=2
  -DNEOPIXEL_EYE_LEFT_IDX=0
  -DNEOPIXEL_EYE_RIGHT_IDX=1
  -DNEOPIXEL_EYE_BRIGHTNESS=40

upload_protocol = esptool
board_upload.wait_for_upload_port = true
